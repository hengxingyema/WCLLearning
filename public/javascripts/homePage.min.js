var app=angular.module("yemaWebApp",[]),navIndex=0;app.controller("homePageCtrl",function($scope,$http){$scope.inviteUrl="http://www.mustangop.com/user/register/"+getCookie("userIdCookie"),$scope.copyUrl=function(){$("#output").popover("toggle");var Url=document.getElementById("invitecopy");Url.select(),document.execCommand("Copy")},$scope.noviceTaskObject=Object(),$scope.noviceTaskObject.luxuryUserStep=0,$scope.noviceTaskObject.hasFirstRecharge=0;var noviceTaskUrl="/homePage/noviceTask";$http.get(noviceTaskUrl).success(function(response){$scope.noviceTaskObject=response.noviceTaskObject}),$("#myCarousel").carousel({interval:5e3}),$("#myCarousel1").carousel({interval:3e3});var bannerurl="/homePage/banner";$http.get(bannerurl).success(function(response){$scope.bannerUrl=response.bannerUrl});var ischeckinsUrl="/homePage/ischeckins";$scope.isCheckIns=0,$scope.todayYB=1,$scope.continueCheck=2,$scope.latestDays=0,$http.get(ischeckinsUrl).success(function(response){0==response.errorId&&($scope.isCheckIns=response.isCheckIns,$scope.todayYB=response.todayYB,$scope.continueCheck=response.continueCheck,$scope.latestDays=response.latestDays)}),$scope.releaseTaskY=0,$scope.doTaskY=0,$scope.checkTaskY=0,$http.get("/homePage/dayTask").success(function(response){0==response.errorId&&($scope.releaseTaskY=response.releaseTaskY,$scope.doTaskY=response.doTaskY,$scope.checkTaskY=response.checkTaskY)});var releaseTaskURL="/webAnalysis/taskCount";$http.get(releaseTaskURL).success(function(response){$scope.releaseTotalCount=response.releaseTotalCount,$scope.receiveTotalCount=response.receiveTotalCount,$scope.finishRate=response.finishRate,$scope.enterAppCount=response.enterAppCount,$scope.onlineTime=response.onlineTime,console.log("累计发布任务数"+response.releaseTotalCount),console.log("完成有效任务数"+response.receiveTotalCount),console.log("完成率"+response.finishRate),console.log("入驻App数"+response.enterAppCount),console.log("野马上线"+response.onlineTime+"天")}),$scope.dayTaskLock=0,$scope.dayTaskBtn=function(actionId){if(1!=$scope.dayTaskLock){$scope.dayTaskLock=1;var dayTaskURL="/homePage/dayTask";$http.post(dayTaskURL,{actionId:actionId}).success(function(response){$scope.dayTaskLock=0,0==response.errorId&&($scope.releaseTaskY=response.releaseTaskY,$scope.doTaskY=response.doTaskY,$scope.checkTaskY=response.checkTaskY)})}},$scope.checkInLock=0,$scope.butCheckIns=function(){if(1!=$scope.checkInLock){$scope.checkInLock=1;var checkInsURL="/homePage/checkIns";$http.post(checkInsURL,{}).success(function(response){$scope.checkInLock=0,$scope.errorId=response.errorId,$scope.errorMsg=response.errorMsg,0==response.errorId?($scope.errorId=response.errorId,$scope.errorMsg=response.errorMsg,$scope.isCheckIns=1,$scope.latestDays+=1):toastr.error(response.errorMsg)})}},$scope.jump=function(curren){window.open("http://aso100.com/app/rank/appid/"+curren.appleId+"/country/cn")},$scope.jump1=function(curren){window.open("http://aso100.com/app/keyword/appid/"+curren.appleId+"/country/cn")},$scope.jump2=function(curren){window.open("http://aso100.com/app/comment/appid/"+curren.appleId+"/country/cn")},$scope.jump3=function(curren){window.open("http://aso100.com/app/download/appid/"+curren.appleId+"/country/cn")},$scope.totalUndoCount=0,$scope.refusedCount=0;var indexUrl="/index";$http.get(indexUrl).success(function(response){$scope.totalUndoCount=response.totalUndoCount,$scope.totalRefusedCount=response.totalRefusedCount});var unCheckCountUrl="/index/unCheckTaskCount";$scope.pendingCount=0,$http.get(unCheckCountUrl).success(function(response){$scope.pendingCount=response.pendingCount});var myReleaseTaskUrl="/homePage/myReleaseTask";$scope.noApp=!0,$http.get(myReleaseTaskUrl).success(function(response){$scope.myReleaseTask=response.myReleaseTaskInfo,void 0!=$scope.myReleaseTask&&$scope.myReleaseTask.length<=0?$scope.noApp=!0:$scope.noApp=!1}),$scope.receInLock=0,clickToReceive=function(button){if(1!=$scope.receInLock){$scope.receInLock=1;var actionId=button.getAttribute("data-id"),userReceiveAwardUrl="/homePage/userReceiveAward",transferMoney={actionId:actionId};$http.post(userReceiveAwardUrl,transferMoney).success(function(response){$scope.receInLock=0,$scope.errorId=response.errorId,$scope.errorMsg=response.errorMsg,0==response.errorId&&($scope.errorId=response.errorId,$scope.errorMsg=response.errorMsg,"finishNoviceTask"==actionId?$scope.noviceTaskObject.noviceTaskAcceptReward=-1:"uploadHaveReceive"==actionId?$scope.noviceTaskObject.noviceReward=-1:"inviteUserReward"==actionId?$scope.noviceTaskObject.canReceive=0:"guideUserRewardYB"==actionId&&($scope.noviceTaskObject.successCanReceive=0))})}};var newUserURL="/homePage/newUser";$http.get(newUserURL).success(function(response){$scope.userCanGetYbObject=response.userCanGetYbObject,0==response.errorId&&($scope.userCanGetYbObject=response.userCanGetYbObject)}),$scope.inLock=0,userCanGetYB=function(a){if(1!=$scope.inLock){$scope.inLock=1;var actionId=a.getAttribute("data-id"),userReceiveAwardUrl="/homePage/userCanGetYB",transferMoney={actionId:actionId};$http.post(userReceiveAwardUrl,transferMoney).success(function(response){$scope.inLock=0,$scope.errorId=response.errorId,$scope.errorMsg=response.errorMsg,0==response.errorId?($scope.errorId=response.errorId,$scope.errorMsg=response.errorMsg,"newUserOneGetYB"==actionId?($scope.userCanGetYbObject.newUserOneGetYB="lala",toastr.success("领取奖励成功,棒棒哒",{timeOut:2e3})):"newUserTwoGetYB"==actionId?($scope.userCanGetYbObject.newUserTwoGetYB="lala",toastr.success("领取奖励成功,棒棒哒",{timeOut:2e3})):"newUserThreeGetYB"==actionId?($scope.userCanGetYbObject.newUserThreeGetYB="lala",toastr.success("领取奖励成功,棒棒哒",{timeOut:2e3})):"canGet50YB"==actionId?($scope.userCanGetYbObject.canGet50YB="lala",toastr.success("领取奖励成功,棒棒哒",{timeOut:2e3})):"canGet100YB"==actionId&&($scope.userCanGetYbObject.canGet100YB="lala",$scope.userCanGetYbObject="",toastr.success("领取奖励成功,棒棒哒",{timeOut:2e3}))):toastr.error(response.errorMsg)})}};var taskExpertURL="/homePage/taskExpert";$http.get(taskExpertURL).success(function(response){$scope.noviceObject=response.noviceObject,0==response.errorId?($scope.noviceObject=response.noviceObject,$scope.isTaskExpert=!0):$scope.isTaskExpert=response.isTaskExpert}),$scope.receiveYCoin=function(){var luxuryURL="/homePage/receiveYCoin";$http.post(luxuryURL,{}).success(function(response){$scope.luxuryMessage=response.errorMsg,$scope.luxurySucceed=response.errorId})}});