var app=angular.module("yemaWebApp",["angularFileUpload"]),navIndex=3;app.controller("revokeControl",function($scope,$http,$location){var appurlList=$location.absUrl().split("/");appurlList[appurlList.length-1];$scope.revokeMackList=[];var revolkeTaskUrl="revokeTaskList";$http.get(revolkeTaskUrl).success(function(response){0==response.errorId&&($scope.revokeMackList=response.revokeMackList)});var selectedRevokeItem;$scope.selectTask=function(revokeItem){selectedRevokeItem=revokeItem},$scope.revokeSucceed=function(revokeReason,$event){$event.target.disabled=!0;var dealRevokeUrl="/nextTaskCheck/accept/"+selectedRevokeItem.mackId;$http.post(dealRevokeUrl,{revokeReason:revokeReason}).success(function(response){0!=response.errorId?toastr.error("操作失败",response.errorMsg):(selectedRevokeItem.revokeStatus="revokeSucceed",$("#myModal").modal("hide"),toastr.success("申诉成功,给予做任务者Y币")),$event.target.disabled=!1})},$scope.revokeFailed=function(revokeFailure,$event){var dealRevokeUrl="revokeFailed";$event.target.disabled=!0,$http.post(dealRevokeUrl,{revokeId:selectedRevokeItem.revokeId,dealInfo:revokeFailure}).success(function(response){0!=response.errorId?toastr.error("驳回失败",response.errorMsg):(selectedRevokeItem.revokeStatus="revokeFailed",$("#myModal1").modal("hide"),toastr.success("驳回成功")),$event.target.disabled=!1})}});